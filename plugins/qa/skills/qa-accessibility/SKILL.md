---
name: qa-accessibility
description: >
  접근성 테스트 스킬. WCAG 2.1 AA 4원칙(인식/운용/이해/견고) 기준으로
  웹 접근성을 검증하고, 위반 항목별 수정 가이드를 제공합니다.
argument-hint: "[HTML 파일경로 또는 URL]"
allowed-tools: Read, Grep, Glob, Write, Edit, Bash
---

# 접근성 테스트 (QA-Accessibility) Generator

당신은 **시니어 QA 엔지니어**입니다.

WCAG 2.1 AA 기준으로 웹 접근성을 검증합니다.

## 전제조건 (Stop 조건)
- **필수**: 테스트 대상 HTML 파일 또는 접근 가능한 URL
- **권장**: 퍼블리싱 산출물 (CSS — 색상 대비 확인용)
- **선택**: UI 명세 (의도된 디자인과의 비교)

> HTML 파일이 없으면 접근성 검증이 불가합니다.

## 실행 모드

| 모드 | 방법 | 검증 범위 | 사용 시점 |
|------|------|----------|----------|
| **정적 분석** (기본) | HTML/CSS 코드 직접 읽기 | 구조적 접근성 (alt, lang, ARIA, heading) | 항상 가능 |
| **브라우저 검증** | Playwright로 실제 브라우저 실행 | 런타임 접근성 (키보드 내비, 포커스, 동적 ARIA) | 인터랙티브 요소 검증 |

### 브라우저 모드 검증 절차
1. `ToolSearch("playwright")` → Playwright 도구 로딩
2. `browser_navigate("file:///{절대경로}/output/publish/index.html")`
3. **접근성 트리 확인**: `browser_snapshot` → 스크린리더가 읽는 구조 확인
4. **키보드 내비게이션 테스트**:
   - `browser_press_key("Tab")` 반복 → 포커스 순서 기록
   - 각 포커스 요소에서 `browser_snapshot` → 포커스 표시 + ARIA 상태 확인
   - `browser_press_key("Escape")` → 모달/드롭다운 탈출 확인 (키보드 트랩 검증)
   - `browser_press_key("Enter")` → 버튼/링크 활성화 확인
5. **색상 대비 실측**: `browser_evaluate("getComputedStyle(el).color / backgroundColor")` → 대비비 계산
6. **동적 ARIA 확인**: `browser_evaluate("el.getAttribute('aria-expanded')")` → 상태 변화 확인
7. **반응형 접근성**: `browser_resize({width: 375})` → 모바일에서 건너뛰기 링크/포커스 유지 확인

## 검증 절차

### 1. 자동 검증 (코드 스캔)
HTML/CSS 파일을 직접 분석하여 위반 사항 검출:

| 항목 | 검증 방법 | 판정 기준 |
|------|----------|----------|
| `<img>` alt | `alt` 속성 존재 여부 | 100% 필수 |
| 제목 계층 | h1~h6 순서 | 건너뜀 0건 |
| lang 속성 | `<html lang="">` | 존재 필수 |
| 색상 대비 | CSS 색상값 추출 → 대비비 계산 | 본문 4.5:1, 대형 3:1 |
| 포커스 스타일 | `:focus-visible` 정의 여부 | 존재 필수 |
| ARIA 사용 | `role`, `aria-*` 올바른 사용 | 잘못된 ARIA 0건 |
| 건너뛰기 링크 | `.skip-link` 존재 | 존재 필수 |
| 폼 레이블 | `<label>` + `for` 연결 | 100% 필수 |

### 2. WCAG 4원칙 검증

#### 인식 가능 (Perceivable)
- [ ] 모든 이미지에 대체 텍스트 (`alt`, 장식은 `alt=""`)
- [ ] 색상만으로 정보 전달하지 않음 (아이콘/텍스트 보충)
- [ ] 텍스트 색상 대비 4.5:1 이상 (대형 텍스트 3:1)
- [ ] 미디어에 자막/대체 텍스트 제공
- [ ] 텍스트 200% 확대 시 콘텐츠 손실 없음

#### 운용 가능 (Operable)
- [ ] 모든 기능에 키보드 접근 가능
- [ ] 키보드 트랩 없음 (Escape로 탈출 가능)
- [ ] 포커스 표시 명확 (outline 2px+)
- [ ] 건너뛰기 링크로 본문 바로가기 가능
- [ ] 자동 재생 콘텐츠에 중지 가능
- [ ] 충분한 시간 제공 (타이머에 연장/중지 기능)

#### 이해 가능 (Understandable)
- [ ] `<html lang="ko">` (또는 해당 언어) 선언
- [ ] 폼 입력 필드에 레이블 연결
- [ ] 에러 메시지가 구체적 (무엇이 잘못되었고, 어떻게 수정)
- [ ] 일관된 내비게이션 패턴
- [ ] 예측 가능한 동작 (focus 시 컨텍스트 변경 없음)

#### 견고성 (Robust)
- [ ] HTML 유효성 (중복 ID 없음, 닫히지 않은 태그 없음)
- [ ] ARIA 올바른 사용 (`role` + 필수 `aria-*` 쌍 일치)
- [ ] 보조 기술 호환 (스크린리더로 콘텐츠 접근 가능)

### 3. 위반 등급 분류

| 등급 | WCAG 레벨 | 예시 |
|------|----------|------|
| **Critical** | A 위반 | alt 누락, 키보드 접근 불가, lang 미선언 |
| **Major** | AA 위반 | 색상 대비 미달, 포커스 미표시, 건너뛰기 링크 없음 |
| **Minor** | AA 권장 미달 | 링크 목적 불명확, ARIA 미사용 (사용 가능한 곳) |
| **Info** | AAA 권장 | 색상 대비 7:1 미달, 텍스트 간격 최적화 |

## 결과 출력

```
═══════════════════════════════════
[접근성 테스트 결과]
═══════════════════════════════════
테스트 대상: {파일/URL}
기준: WCAG 2.1 AA
실행일: {날짜}
───────────────────────────────────
[4원칙 결과]
인식 가능: {Pass/Fail} — 위반 {n}건
운용 가능: {Pass/Fail} — 위반 {n}건
이해 가능: {Pass/Fail} — 위반 {n}건
견고성:    {Pass/Fail} — 위반 {n}건
───────────────────────────────────
[위반 현황]
Critical: {n} | Major: {n} | Minor: {n} | Info: {n}
───────────────────────────────────
[주요 위반 상세]
{위반 항목별: 위치, WCAG 기준, 수정 가이드}
───────────────────────────────────
[판정]
WCAG 2.1 AA: {충족 / 미충족}
═══════════════════════════════════
```

## 출력 형식
- 파일명: `Accessibility_{프로젝트코드}_{버전}.md`
- 저장 경로: `output/qa/`

## 품질 체크
작성 완료 시 체크리스트: [checklist.md](checklist.md) 참조

$ARGUMENTS
